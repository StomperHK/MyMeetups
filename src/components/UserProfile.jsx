import {Fragment, useState, useEffect, useRef} from 'react';

import {signOut} from 'firebase/auth';

import Button from '@mui/material/Button';
import {createTheme, ThemeProvider} from '@mui/material/styles';
import {makeStyles} from '@material-ui/core/styles';

import styleClasses from '../scss/UserProfile.module.scss';

function UserProfile(props) {
  const {
    auth,
    currentUser,
    changeDataIsLoadingState,
    changeFeedbackModalState
  } = props

  const [profileModalState, changeProfileModalState] = useState(false)

  const firstModalElementRef = useRef()

  const normalTheme = createTheme({
    palette: {
      primary: {
        main: '#525ee2',
      }
    }
  })

  const centerButtonMaterialClass = makeStyles({
    root: {
      display: 'flex !important',
      margin: '9px auto 0px !important'
    }
  })()

  const firebaseAuthenticationErrors = {
    'auth/invalid-user-token': ['o seu tôken de login não é mais válido: faça login denovo', 5000],
    'auth/network-request-failed': ['problema de conexão: reinicie a página e tente denovo', 5000],
    'auth/operation-not-allowed': ['provedor de crendencial desconfigurado', 3500],
    'auth/requires-recent-login': ['problema de autentição: faça login denovo', 4500],
    'auth/too-many-requests': ['muitas requisições feitas: aguarde e tente denovo', 5000],
    'auth/unauthorized-domain': ['este domínio não pode fazer operações de autenticação', 5000],
    'auth/user-token-expired': ['faça login novamente', 2000],
    'auth/web-storage-unsupported': ['seu navegador não suporta armazenamento de dados', 5000],
  }

  useEffect(focusFirstModalElement, [profileModalState])

  function focusFirstModalElement() {
    if (profileModalState) {
      firstModalElementRef.current.focus()
    }
  }

  function callErrorMessageHandler(errorCode) {
    const [treatedErrorMessage, duration] =
      firebaseAuthenticationErrors[errorCode] || ['erro inesperado: reinicie a página', 3000]
    
    changeFeedbackModalState([true, treatedErrorMessage, 'error', duration])
  }

  function signOutUser() {
    changeDataIsLoadingState(true)

    signOut(auth)
    .then(() => {
      changeDataIsLoadingState(false)
    })
    .catch(error => {
      changeDataIsLoadingState(false)
      callErrorMessageHandler(error.code)
    })
  }

  function showDifferentContentsDependingOfTheUser() {
    return !currentUser ?
      (
        <Fragment>
          <svg className={styleClasses.singleSVG} aria-label="imagem de alerta" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 790 512.20805">
            <path d="M925.56335,704.58909,903,636.49819s24.81818,24.81818,24.81818,45.18181l-4.45454-47.09091s12.72727,17.18182,11.45454,43.27273S925.56335,704.58909,925.56335,704.58909Z" transform="translate(-205 -193.89598)" fill="#e6e6e6"/><path d="M441.02093,642.58909,419,576.13509s24.22155,24.22155,24.22155,44.09565l-4.34745-45.95885s12.42131,16.76877,11.17917,42.23245S441.02093,642.58909,441.02093,642.58909Z" transform="translate(-205 -193.89598)" fill="#e6e6e6"/><path d="M784.72555,673.25478c.03773,43.71478-86.66489,30.26818-192.8092,30.35979s-191.53562,13.68671-191.57335-30.028,86.63317-53.29714,192.77748-53.38876S784.68782,629.54,784.72555,673.25478Z" transform="translate(-205 -193.89598)" fill="#e6e6e6"/><rect y="509.69312" width="790" height="2" fill="#3f3d56"/><polygon points="505.336 420.322 491.459 420.322 484.855 366.797 505.336 366.797 505.336 420.322" fill="#a0616a"/><path d="M480.00587,416.35743H508.3101a0,0,0,0,1,0,0V433.208a0,0,0,0,1,0,0H464.69674a0,0,0,0,1,0,0v-1.54149A15.30912,15.30912,0,0,1,480.00587,416.35743Z" fill="#2f2e41"/><polygon points="607.336 499.322 593.459 499.322 586.855 445.797 607.336 445.797 607.336 499.322" fill="#a0616a"/><path d="M582.00587,495.35743H610.3101a0,0,0,0,1,0,0V512.208a0,0,0,0,1,0,0H566.69674a0,0,0,0,1,0,0v-1.54149A15.30912,15.30912,0,0,1,582.00587,495.35743Z" fill="#2f2e41"/>
            <path d="M876.34486,534.205A10.31591,10.31591,0,0,0,873.449,518.654l-32.23009-131.2928L820.6113,396.2276l38.33533,126.949a10.37185,10.37185,0,0,0,17.39823,11.0284Z" transform="translate(-205 -193.89598)" fill="#a0616a"/><path d="M851.20767,268.85955a11.38227,11.38227,0,0,0-17.41522,1.15247l-49.88538,5.72709,7.58861,19.24141,45.36779-8.49083a11.44393,11.44393,0,0,0,14.3442-17.63014Z" transform="translate(-205 -193.89598)" fill="#a0616a"/>
            <path d="M769,520.58909l21.76811,163.37417,27.09338-5.578s-3.98437-118.98157,9.56238-133.32513S810,505.58909,810,505.58909Z" transform="translate(-205 -193.89598)" fill="#2f2e41"/><path d="M778,475.58909l-10,15s-77-31.99929-77,19-4.40631,85.60944-6,88,18.43762,8.59375,28,7c0,0,11.79687-82.21884,11-87,0,0,75.53355,37.03335,89.87712,33.84591S831.60944,536.964,834,530.58909s-1-57-1-57l-47.81-14.59036Z" transform="translate(-205 -193.89598)" fill="#2f2e41"/><path d="M779.34915,385.52862l-2.85032-3.42039s-31.92361-71.82815-19.3822-91.21035,67.26762-22.23252,68.97783-21.0924-4.08488,15.9428-.09446,22.78361c0,0-42.394,9.19121-45.24435,10.33134s21.96615,43.2737,21.96615,43.2737l-2.85031,25.6529Z" transform="translate(-205 -193.89598)" fill="#ccc"/><path d="M835.21549,350.18459S805.57217,353.605,804.432,353.605s-1.71017-7.41084-1.71017-7.41084l-26.223,35.91406S763.57961,486.29929,767,484.58909s66.50531,8.11165,67.07539,3.55114-.57008-27.3631,1.14014-28.50324,29.64328-71.82811,29.64328-71.82811-2.85032-14.82168-12.54142-19.95227S835.21549,350.18459,835.21549,350.18459Z" transform="translate(-205 -193.89598)" fill="#ccc"/><path d="M855.73783,378.11779l9.121,9.69109S878.41081,499.1687,871,502.58909s-22,3-22,3l-14.35458-52.79286Z" transform="translate(-205 -193.89598)" fill="#ccc"/><circle cx="601.72966" cy="122.9976" r="26.2388" fill="#a0616a"/>
            <path d="M800.57267,320.98789c-.35442-5.44445-7.22306-5.631-12.67878-5.68255s-11.97836.14321-15.0654-4.35543c-2.0401-2.973-1.65042-7.10032.035-10.28779s4.45772-5.639,7.18508-7.99742c7.04139-6.08884,14.29842-12.12936,22.7522-16.02662s18.36045-5.472,27.12788-2.3435c10.77008,3.84307,25.32927,23.62588,26.5865,34.99176s-3.28507,22.95252-10.9419,31.44586-25.18188,5.0665-36.21069,8.088c6.7049-9.48964,2.28541-26.73258-8.45572-31.164Z" transform="translate(-205 -193.89598)" fill="#2f2e41"/><circle cx="361.7217" cy="403.5046" r="62.98931" fill="#6f63ff"/><path d="M524.65625,529.9355a45.15919,45.15919,0,0,1-41.25537-26.78614L383.44873,278.05757a59.83039,59.83039,0,1,1,111.87012-41.86426l72.37744,235.41211a45.07978,45.07978,0,0,1-43.04,58.33008Z" transform="translate(-205 -193.89598)" fill="#6f63ff"/>
          </svg>
          <p tabIndex="0">você está sem conta</p>
        </Fragment>
      ) :
      (
        <Fragment>
          {currentUser.photoURL ?
          <img src={currentUser.photoURL} alt="foto do usuário" /> :
          (<div className={styleClasses.containerForSVGs}>
            <svg aria-label="imagem de um avatar homem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 676 676"><path d="M938,450a336.852,336.852,0,0,1-27.22,133.1L909.66,585.68A338.559,338.559,0,0,1,541.35,782.93q-3.045-.54-6.08-1.12a334.98111,334.98111,0,0,1-61.14-18.03q-4.815-1.935-9.56-4.01c-2.16-.94-4.32-1.91-6.46-2.91A338.41424,338.41424,0,0,1,262,450c0-186.67,151.33-338,338-338S938,263.33,938,450Z" transform="translate(-262 -112)" fill="#6f63ff"/><path d="M541.35,782.93q-3.045-.54-6.08-1.12c-1.32-38.31-5.85-116.94-21.30005-199.29C505.52,537.45,493.79,491.25,477.52,449.95a412.60387,412.60387,0,0,0-19.07-41.84c-16.44-31.05-36.38-57.19-60.56-74.9l3.56-4.86q30.165,22.11,54.22,62.08,7.215,11.97,13.86005,25.54,7.125,14.52,13.59,30.83,4.125,10.38,7.97,21.48,16.74,48.195,28.46,109.98,2.59506,13.65,4.94,27.97C536.6,680.2,540.25,748.59,541.35,782.93Z" transform="translate(-262 -112)" opacity="0.2"/>
              <path d="M464.57,759.77c-2.16-.94-4.32-1.91-6.46-2.91-2.09-22.7-5.93-50.86-12.95-77.59A254.55666,254.55666,0,0,0,433.35,644.07c-8.01-18.75-18.38-34.69-31.79-44.52l3.56-4.85c14.04,10.28,24.87,26.53,33.24,45.54,9.43,21.42,15.72,46.35,19.91,70.17C461.38,728.1,463.34,745.19,464.57,759.77Z" transform="translate(-262 -112)" opacity="0.2"/><circle cx="102.26174" cy="190.98167" r="30.08857" opacity="0.2"/><circle cx="111.9514" cy="449.99083" r="30.08857" opacity="0.2"/><path d="M483.71449,353.52139c-6.38046,35.99732,7.70456,68.59225,7.70456,68.59225s24.42979-25.76825,30.81025-61.76557-7.70457-68.59225-7.70457-68.59225S490.09494,317.52407,483.71449,353.52139Z" transform="translate(-262 -112)" opacity="0.2"/>
              <path d="M383.71766,438.97122c34.33494,12.555,68.83676,4.498,68.83676,4.498s-21.16612-28.41279-55.50106-40.96784-68.83675-4.498-68.83675-4.498S349.38272,426.41617,383.71766,438.97122Z" transform="translate(-262 -112)" opacity="0.2"/><path d="M377.89534,668.333c24.066,8.80008,48.28314,3.0594,48.28314,3.0594S411.37687,651.384,387.31086,642.5839s-48.28314-3.0594-48.28314-3.0594S353.82933,659.53292,377.89534,668.333Z" transform="translate(-262 -112)" opacity="0.2"/><circle cx="337.30608" cy="281.0788" r="131.77014" fill="#d0cde1"/><path d="M547.83337,493.96531s16.47127,78.23852,16.47127,86.47415,78.23852,45.296,78.23852,45.296L712.546,613.382,737.253,539.26129s-41.17817-61.76725-41.17817-86.47415Z" transform="translate(-262 -112)" fill="#d0cde1"/>
              <path d="M910.78,583.1,909.66,585.68A338.559,338.559,0,0,1,541.35,782.93q-3.045-.54-6.08-1.12a334.98111,334.98111,0,0,1-61.14-18.03q-4.815-1.935-9.56-4.01c-2.16-.94-4.32-1.91-6.46-2.91a337.59273,337.59273,0,0,1-55.25-32.28l-15.62-45.31,8.78-6.69995,18.06-13.79,19.27-14.71,5.01-3.83,75.61-57.72,5.58-4.26,39.3-30,.01-.01s42.5,69.25,104.27,48.66,60.42-79.63,60.42-79.63Z" transform="translate(-262 -112)" fill="#2f2e41"/>
              <path d="M485.03538,286.916s41.83653-90.64581,122.02321-69.72755,125.50958,52.29566,128.996,83.67306-1.74319,78.44348-1.74319,78.44348-8.716-64.498-64.498-50.55247-142.94147,3.48638-142.94147,3.48638L512.9264,457.74849s-15.6887-22.66145-33.12058-8.71594S429.25335,314.807,485.03538,286.916Z" transform="translate(-262 -112)" fill="#2f2e41"/><path d="M474.13,763.78q-4.815-1.935-9.56-4.01c-2.16-.94-4.32-1.91-6.46-2.91a338.835,338.835,0,0,1-87.59-58.7c9.19-12.52,16.72-18.89,16.72-18.89h61.77l9.26,31.14Z" transform="translate(-262 -112)" fill="#2f2e41"/><path d="M856.67,576.32l52.99,9.36A337.94434,337.94434,0,0,1,852.9,674.25Z" transform="translate(-262 -112)" fill="#2f2e41"/>
            </svg>
            <svg aria-label="imagem de um avatar mulher" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 676 676"><path d="M938,450a337.10014,337.10014,0,0,1-24.55,126.7c-.04.09-.07.17-.11.26v.01a336.51307,336.51307,0,0,1-42.79,75.64q-5.055,6.75-10.43,13.22c-1.31,1.58-2.64,3.15-3.97,4.7q-10.275,11.925-21.62,22.85-2.64,2.54994-5.34,5.04c-.42.39-.84.77-1.26,1.16a337.81887,337.81887,0,0,1-27.65,22.7q-9.675,7.155-19.86,13.59-2.235,1.425-4.5,2.8-3.93,2.4-7.93,4.69-5.22,3-10.57,5.81c-1.44.77-2.88995,1.51-4.34,2.25-2.12,1.09-4.25,2.14-6.4,3.17-.37.18-.74.36-1.11.53-1.4.68-2.82,1.34-4.24,2a334.89638,334.89638,0,0,1-57.46,20.39c-.11.03-.21.05-.32.08-1.29.33-2.59.65-3.89.96-.97.24-1.95.47-2.93.69a2.48782,2.48782,0,0,1-.37.09c-2.01.47-4.02.92-6.05,1.33-1.14.24-2.28.48-3.42.71-.69.15-1.39.28-2.08.41-.87.17-1.73.33-2.6.5-.48.1-.96.18-1.45.26-1.1.2-2.2.4-3.29.59-1.86.32-3.74.63-5.61.91-1.36.21-2.71.41-4.07.6-1.6.23-3.2.44-4.81.64-.44.07-.88.12-1.32.17q-.85491.10492-1.71.21c-1.15.14-2.3.27-3.46.39-.6.07-1.19.13-1.79.19q-1.71.18-3.42.33c-1.47.13995-2.94.26-4.42.38-1.8.14-3.59.27-5.4.38-1.16.07-2.32.14-3.49.2-2.98.16-5.96.27-8.96.35-1.49.04-2.99.07-4.49.09h-.03c-1.49.02-2.99.03-4.49.03a339.151,339.151,0,0,1-45.45-3.04q-16.575-2.22-32.62-6.02c-.43-.1-.86-.2-1.28-.31-1.08-.25-2.15-.52-3.22-.79-.95-.24-1.89-.49-2.84-.74a335.35735,335.35735,0,0,1-70.6-27.19c-.11-.06-.23-.12-.34-.18-.65-.34-1.29-.67-1.93-1.02q-2.115-1.11-4.21-2.26-11.925-6.55507-23.24-14.02-2.91-1.905-5.76-3.87c-.61-.42-1.21-.84-1.81-1.26-.63-.44-1.26-.88-1.88-1.32q-2.475-1.755-4.92-3.55-10.125-7.44-19.65-15.61a339.74031,339.74031,0,0,1-59.16-65.85Q312.315,628.19,304.71,614.59A336.38981,336.38981,0,0,1,262,450c0-186.67,151.33-338,338-338S938,263.33,938,450Z" transform="translate(-262 -112)" fill="#6f63ff"/>
              <path d="M654.35,778.63c1.08-.25,2.15-.52,3.22-.79.95-.24,1.89-.49,2.84-.74.05-1.99.12006-4.18.19-6.55.59-18.56,1.98-48.44,5.26-84.44q.27-2.895.54-5.83c1.17-12.2,2.54-25.03,4.18-38.33.05-.44.11-.87.16-1.31,1.33-10.78,2.84-21.85,4.54-33.13q1.78491-11.835,3.86-23.93c.1-.56.2-1.13.3-1.69.4-2.33.81-4.65,1.23-6.99,1.17-6.51,2.42-13.06,3.73-19.61,4.61-23.04,10.1-46.22,16.65-68.77a550.90913,550.90913,0,0,1,24.53-68.61,338.80588,338.80588,0,0,1,26.74-49.83c.15-.23.3-.45.45-.68,13.15-19.81,28.18-36.62,45.34-49.19l-3.56-4.86q-24.66,18.075-45.24,48.1c-.07.1-.13.19-.2.29A327.43692,327.43692,0,0,0,722.19,410a527.39526,527.39526,0,0,0-25.68,69.37q-9.84,33.03-17.65,71.57-2.74494,13.575-5.24,27.82c-.28,1.62-.56,3.24-.84,4.87,0,.02-.01.05-.01.07-.43,2.5-.84,5-1.26,7.53q-1.56006,9.555-2.94,18.96-2.13,14.49-3.85,28.48-.56991,4.62-1.1,9.17-.75,6.42-1.42,12.67-.945,8.7-1.73,17.03l-.15,1.53c-.08.88-.16,1.76-.24,2.63C656.02,725.49,654.75,760.86,654.35,778.63Z" transform="translate(-262 -112)" opacity="0.2"/><path d="M731.01,749.91c.11-.06.23-.12.34-.18,2.06-1.07,4.1-2.16,6.14-3.28.67-7.98,1.57-16.75,2.75-25.97.25-1.9.5-3.83.78-5.77.13995-1.04.29-2.09.44-3.15,1.18-8.12,2.58-16.5,4.26-24.92,6.83-34.36,18.17-69.48,37-91.16,1.01-1.17,2.04-2.29,3.11005-3.38a67.66245,67.66245,0,0,1,8.61-7.55l-3.56-4.85a77.071,77.071,0,0,0-11.8,10.79q-1.875,2.085-3.66,4.34c-17.33,21.81-28.15,54.1-34.88995,86.07-1.76,8.34-3.24,16.67005-4.5,24.78q-.48,3.18-.92,6.3C733.16,725.72,731.87,738.7,731.01,749.91Z" transform="translate(-262 -112)" opacity="0.2"/><circle cx="569.73826" cy="175.98167" r="30.08857" opacity="0.2"/><circle cx="560.0486" cy="434.99083" r="30.08857" opacity="0.2"/><path d="M712.28551,338.52139c6.38046,35.99732-7.70456,68.59225-7.70456,68.59225s-24.42979-25.76825-30.81025-61.76557,7.70457-68.59225,7.70457-68.59225S705.90506,302.52407,712.28551,338.52139Z" transform="translate(-262 -112)" opacity="0.2"/>
              <path d="M812.28234,423.97122c-34.33494,12.555-68.83676,4.498-68.83676,4.498s21.16612-28.41279,55.50106-40.96784,68.83675-4.498,68.83675-4.498S846.61728,411.41617,812.28234,423.97122Z" transform="translate(-262 -112)" opacity="0.2"/><path d="M818.10466,653.333c-24.066,8.80008-48.28314,3.0594-48.28314,3.0594s14.80161-20.00841,38.86762-28.80849,48.28314-3.0594,48.28314-3.0594S842.17067,644.53292,818.10466,653.333Z" transform="translate(-262 -112)" opacity="0.2"/><path d="M701.96,648.27l1.22.63C703.06006,650.2,702.77,651,701.96,648.27Z" transform="translate(-262 -112)" fill="#2f2e41"/><path d="M703.57007,648.69c.01.14.02991.29.03992.43l-.43006-.22c.01-.13.02-.27.04-.41C703.32007,646.74,703.19995,644.67,703.57007,648.69Z" transform="translate(-262 -112)" fill="#2f2e41"/>
              <circle cx="311.68289" cy="324.64092" r="164.20902" fill="#2f2e41"/><circle cx="325.20044" cy="382.71266" r="99.44441" fill="#d0cde1"/><path d="M814.27,685.31l-.12.03-23.13,5.55-48.16,11.56-6.57,1.58L663.05,721.6l-6.22,1.5L479.14,765.74a333.63858,333.63858,0,0,1-35.15-15.83c-.11-.06-.23-.12-.34-.18-.65-.34-1.29-.67-1.93-1.02q-2.115-1.11-4.21-2.26-11.925-6.55507-23.24-14.02-2.91-1.905-5.76-3.87c-.61-.42-1.21-.84-1.81-1.26-.63-.44-1.26-.88-1.88-1.32q-2.475-1.755-4.92-3.55c17.26-31.37,58.36-52.22,99.46-63.63,31.02-8.62,37.84-36.95,37.25-62.16a146.9523,146.9523,0,0,0-1.46-17.18,167.47773,167.47773,0,0,0-5.96-26.74l99.45,3.32,10.26,23.64a53.49156,53.49156,0,0,0-.27,7.82c.78,19.39,12.75,31.93,27.52,40.02,1.92,1.05005,3.89,2.03,5.89,2.94,24.22,11.01,52.73,11.76,52.73,11.76a101.52,101.52,0,0,1,26.09.49q3.15.48,6.12,1.15A88.13944,88.13944,0,0,1,789.09,658.23a91.60126,91.60126,0,0,1,10.41,8.63A82.67563,82.67563,0,0,1,814.27,685.31Z" transform="translate(-262 -112)" fill="#d0cde1"/>
              <path d="M829.19,698.42c-.42.39-.84.77-1.26,1.16a337.81887,337.81887,0,0,1-27.65,22.7q-9.675,7.155-19.86,13.59-2.235,1.425-4.5,2.8-3.93,2.4-7.93,4.69-5.22,3-10.57,5.81c-1.44.77-2.88995,1.51-4.34,2.25-2.12,1.09-4.25,2.14-6.4,3.17-.37.18-.74.36-1.11.53l-4.23-3.51,49.68-60.72,9.99-12.21s3.99,0,13.14,6.66a130.9934,130.9934,0,0,1,14.3,12.34C828.69,697.93,828.94,698.17,829.19,698.42Z" transform="translate(-262 -112)" fill="#d0cde1"/><path d="M828.49,697.74a11.39223,11.39223,0,0,1-.56,1.84,337.81887,337.81887,0,0,1-27.65,22.7,117.95015,117.95015,0,0,1-25.79,6.13s.75,3.76,1.43,10.26q-3.93,2.4-7.93,4.69-5.22,3-10.57,5.81c-1.44.77-2.88995,1.51-4.34,2.25-2.12,1.09-4.25,2.14-6.4,3.17-.37.18-.74.36-1.11.53-1.4.68-2.82,1.34-4.24,2a334.89638,334.89638,0,0,1-57.46,20.39c-.11.03-.21.05-.32.08-1.29.33-2.59.65-3.89.96-.97.24-1.95.47-2.93.69a2.48782,2.48782,0,0,1-.37.09c-2.01.47-4.02.92-6.05,1.33-1.14.24-2.28.48-3.42.71-.69.15-1.39.28-2.08.41-.87.17-1.73.33-2.6.5-.48.1-.96.18-1.45.26-1.1.2-2.2.4-3.29.59-1.86.32-3.74.63-5.61.91-1.36.21-2.71.41-4.07.6-1.6.23-3.2.44-4.81.64-.44.07-.88.12-1.32.17q-.85491.10492-1.71.21c-1.15.14-2.3.27-3.46.39-.6.07-1.19.13-1.79.19q-1.71.18-3.42.33c-1.47.13995-2.94.26-4.42.38-1.8.14-3.59.27-5.4.38-1.16.07-2.32.14-3.49.2-2.98.16-5.96.27-8.96.35-1.49.04-2.99.07-4.49.09h-.03c-1.49.02-2.99.03-4.49.03a339.151,339.151,0,0,1-45.45-3.04q-16.575-2.22-32.62-6.02c-.43-.1-.86-.2-1.28-.31-1.08-.25-2.15-.52-3.22-.79-.95-.24-1.89-.49-2.84-.74a335.35735,335.35735,0,0,1-70.6-27.19c-.11-.06-.23-.12-.34-.18-.65-.34-1.29-.67-1.93-1.02,54.89-12.79,141.63-32.96,216.9-50.24q3.165-.72,6.29-1.44c27.8-6.38,53.84-12.32,75.87006-17.29q3.42-.765,6.69995-1.5c23.67-5.32,42.05005-9.36,52.02-11.38a81.48836,81.48836,0,0,1,8.14-1.43l20.81,32.25Z" transform="translate(-262 -112)" fill="#2f2e41"/>
              <circle cx="161.4491" cy="205.85142" r="48.91333" fill="#2f2e41"/><circle cx="461.91668" cy="191.87618" r="48.91333" fill="#2f2e41"/><path d="M671.50954,282.91333a48.91227,48.91227,0,0,1,43.67262-48.62417,48.91338,48.91338,0,1,0,0,97.24833A48.91227,48.91227,0,0,1,671.50954,282.91333Z" transform="translate(-262 -112)" fill="#2f2e41"/><path d="M368.796,357.41647a48.91227,48.91227,0,0,1-2.83554-65.296,48.91337,48.91337,0,1,0,68.06011,69.46264A48.91226,48.91226,0,0,1,368.796,357.41647Z" transform="translate(-262 -112)" fill="#2f2e41"/><path d="M573.68289,359.77712c-57.88732,0-104.81427,27.37407-104.81427,61.14166,0,15.10906,9.43269,28.91775,25.003,39.58556l20.1779-14.62031-5.48723,22.90446c2.27682,1.05513,4.60162,2.07636,7.02643,3.02019l30.1437-35.16776v43.20369a175.95757,175.95757,0,0,0,27.95047,2.21583c57.88732,0,104.81427-27.37407,104.81427-61.14166S631.57021,359.77712,573.68289,359.77712Z" transform="translate(-262 -112)" fill="#2f2e41"/><path d="M675.00335,303.87618s-7.59666,34.93809,39.87428,48.91333Z" transform="translate(-262 -112)" fill="#2f2e41"/><path d="M468.86862,310.23519s17.469,39.06051-34.93809,56.52955Z" transform="translate(-262 -112)" fill="#2f2e41"/><ellipse cx="489.41344" cy="514.60154" rx="8.28703" ry="19.88888" transform="translate(-382.60837 38.98959) rotate(-15.63946)" fill="#d0cde1"/><ellipse cx="688.30226" cy="498.02747" rx="19.88888" ry="8.28703" transform="translate(-113.09381 1042.41397) rotate(-86.47577)" fill="#d0cde1"/>
            </svg>
          </div>)}

          <p className={styleClasses.usernameText} tabIndex="0">{currentUser.displayName}</p>

          <p tabIndex="0">{currentUser.email}</p>

          <ThemeProvider theme={normalTheme}>
            <Button className={centerButtonMaterialClass.root}
              onClick={signOutUser}
              size="small" variant="contained"
              startIcon={<svg xmlns="http://www.w3.org/2000/svg" enableBackground="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px"><g><path d="M0,0h24v24H0V0z" fill="none"/></g><g><path d="M17,8l-1.41,1.41L17.17,11H9v2h8.17l-1.58,1.58L17,16l4-4L17,8z M5,5h7V3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h7v-2H5V5z"/></g></svg>}
            >
              sair
            </Button>
          </ThemeProvider>
        </Fragment>
      )
  }

  return (
    <article role="dialog" aria-labelledby="user-profie-label">
      <button className={`${styleClasses.userPhotoButton} button-with-white-background-transition-active`}
        onClick={() => changeProfileModalState(true)} aria-label="visualizar conta"
        aria-haspopup="dialog"
      >
        {currentUser ?
        <img src={currentUser.photoURL} alt="" aria-label="foto do usuário" /> :
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 3.05-1.78 4.93-1.78s4.51.88 4.93 1.78C15.57 19.36 13.86 20 12 20s-3.57-.64-4.93-1.72zm11.29-1.45c-1.43-1.74-4.9-2.33-6.36-2.33s-4.93.59-6.36 2.33C4.62 15.49 4 13.82 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8c0 1.82-.62 3.49-1.64 4.83zM12 6c-1.94 0-3.5 1.56-3.5 3.5S10.06 13 12 13s3.5-1.56 3.5-3.5S13.94 6 12 6zm0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11z"/></svg>}
      </button>

      <div className={`${styleClasses.userProfileBackdrop} ${profileModalState ? styleClasses.showModal : ''}`}
      >
        <div className={styleClasses.userProfileWindow}>
          <header>
            <p id="user-profie-label" tabIndex="0">Sua conta</p>
            <button className={styleClasses.firstModalElement} 
              onClick={() => changeProfileModalState(false)}
              aria-label="fechar janela de perfil"
              ref={firstModalElementRef}
            >
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
            </button>
          </header>

          {showDifferentContentsDependingOfTheUser()}
        </div>
      </div>
    </article>
  )
}

export default UserProfile;
